# This file is autogenerated. Instead of editing this file, please use the
# migrations feature of ActiveRecord to incrementally modify your database, and
# then regenerate this schema definition.

ActiveRecord::Schema.define(:version => 22) do

  create_table "accounts", :force => true do |t|
    t.column "nickname",               :string,   :default => "", :null => false
    t.column "description",            :string
    t.column "institution_identifier", :string,   :default => "", :null => false
    t.column "created_on",             :datetime
    t.column "updated_on",             :datetime
  end

  add_index "accounts", ["nickname"], :name => "index_accounts_on_nickname"

  create_table "currencies", :force => true do |t|
    t.column "alpha_code",   :string,   :limit => 3
    t.column "numeric_code", :integer,  :limit => 3
    t.column "description",  :string
    t.column "obsolete",     :boolean
    t.column "created_on",   :datetime
    t.column "updated_on",   :datetime
  end

  add_index "currencies", ["alpha_code"], :name => "index_currencies_on_alpha_code", :unique => true
  add_index "currencies", ["numeric_code"], :name => "index_currencies_on_numeric_code", :unique => true

  create_table "currency_pairs", :force => true do |t|
    t.column "description",        :string
    t.column "first_currency_id",  :integer,  :null => false
    t.column "second_currency_id", :integer,  :null => false
    t.column "created_on",         :datetime
    t.column "updated_on",         :datetime
  end

  add_index "currency_pairs", ["first_currency_id"], :name => "currency_pairs_first_currency_id_fkey_index"
  add_index "currency_pairs", ["second_currency_id"], :name => "currency_pairs_second_currency_id_fkey_index"

  create_table "dividends", :force => true do |t|
    t.column "amount",        :decimal,               :precision => 15, :scale => 5
    t.column "announce_date", :date
    t.column "ex_date",       :date
    t.column "payable_date",  :date
    t.column "status",        :string,   :limit => 1
    t.column "description",   :string
    t.column "equity_id",     :integer
    t.column "currency_id",   :integer,                                              :null => false
    t.column "created_on",    :datetime
    t.column "updated_on",    :datetime
  end

  add_index "dividends", ["currency_id"], :name => "dividends_currency_id_fkey_index"
  add_index "dividends", ["equity_id"], :name => "dividends_equity_id_fkey_index"

  create_table "equities", :force => true do |t|
    t.column "description", :string
    t.column "m_symbol_id", :integer,  :null => false
    t.column "created_on",  :datetime
    t.column "updated_on",  :datetime
  end

  add_index "equities", ["m_symbol_id"], :name => "index_equities_on_m_symbol_id", :unique => true
  add_index "equities", ["m_symbol_id"], :name => "equities_m_symbol_id_fkey_index"

  create_table "equity_option_series", :force => true do |t|
    t.column "cash_deliverable",             :decimal,  :precision => 15, :scale => 5
    t.column "m_symbol_id",                  :integer
    t.column "cash_deliverable_currency_id", :integer
    t.column "created_on",                   :datetime
    t.column "updated_on",                   :datetime
  end

  add_index "equity_option_series", ["cash_deliverable_currency_id"], :name => "equity_option_series_cash_deliverable_currency_id_fkey_index"
  add_index "equity_option_series", ["m_symbol_id"], :name => "equity_option_series_m_symbol_id_fkey_index"

  create_table "equity_option_underlyings", :force => true do |t|
    t.column "quantity",                :decimal,  :precision => 15, :scale => 5
    t.column "equity_option_series_id", :integer,                                 :null => false
    t.column "underlying_m_symbol_id",  :integer,                                 :null => false
    t.column "created_on",              :datetime
    t.column "updated_on",              :datetime
  end

  add_index "equity_option_underlyings", ["underlying_m_symbol_id"], :name => "equity_option_underlyings_underlying_m_symbol_id_fkey_index"
  add_index "equity_option_underlyings", ["equity_option_series_id"], :name => "equity_option_underlyings_equity_option_series_id_fkey_index"

  create_table "equity_options", :force => true do |t|
    t.column "m_symbol_id",              :integer
    t.column "expiration_date",          :date
    t.column "strike_price",             :decimal,               :precision => 15, :scale => 5
    t.column "call_put",                 :string,   :limit => 1,                                :default => "", :null => false
    t.column "exercise_type",            :string,   :limit => 1
    t.column "equity_option_series_id",  :integer,                                                              :null => false
    t.column "strike_price_currency_id", :integer,                                                              :null => false
    t.column "created_on",               :datetime
    t.column "updated_on",               :datetime
  end

  add_index "equity_options", ["equity_option_series_id"], :name => "equity_options_equity_option_series_id_fkey_index"
  add_index "equity_options", ["strike_price_currency_id"], :name => "equity_options_strike_price_currency_id_fkey_index"
  add_index "equity_options", ["m_symbol_id"], :name => "equity_options_m_symbol_id_fkey_index"

  create_table "event_log", :force => true do |t|
    t.column "time",              :datetime,                               :null => false
    t.column "beginstring",       :string,   :limit => 8,  :default => "", :null => false
    t.column "sendercompid",      :string,   :limit => 64, :default => "", :null => false
    t.column "targetcompid",      :string,   :limit => 64, :default => "", :null => false
    t.column "session_qualifier", :string,   :limit => 64, :default => "", :null => false
    t.column "text",              :text,                   :default => "", :null => false
    t.column "created_on",        :datetime
    t.column "updated_on",        :datetime
  end

  create_table "id_repository", :force => true do |t|
    t.column "nextAllowedID", :integer, :null => false
  end

  create_table "journals", :force => true do |t|
    t.column "description", :string
    t.column "post_date",   :date
    t.column "created_on",  :datetime
    t.column "updated_on",  :datetime
  end

  create_table "m_symbols", :force => true do |t|
    t.column "root",       :string,   :limit => 30, :default => "", :null => false
    t.column "bloomberg",  :string,   :limit => 30
    t.column "isin",       :string,   :limit => 12
    t.column "reuters",    :string,   :limit => 30
    t.column "created_on", :datetime
    t.column "updated_on", :datetime
  end

  create_table "marks", :force => true do |t|
    t.column "tradeable_id", :integer,                                              :null => false
    t.column "mark_value",   :decimal,               :precision => 15, :scale => 5
    t.column "mark_type",    :string,   :limit => 1
    t.column "mark_date",    :date,                                                 :null => false
    t.column "created_on",   :datetime
    t.column "updated_on",   :datetime
  end

  add_index "marks", ["tradeable_id", "mark_date"], :name => "uniq_marks_equity_date", :unique => true
  add_index "marks", ["tradeable_id"], :name => "marks_tradeable_id_fkey_index"

  create_table "messages_log", :force => true do |t|
    t.column "time",              :datetime,                                  :null => false
    t.column "beginstring",       :string,   :limit => 8,  :default => "",    :null => false
    t.column "sendercompid",      :string,   :limit => 64, :default => "",    :null => false
    t.column "targetcompid",      :string,   :limit => 64, :default => "",    :null => false
    t.column "session_qualifier", :string,   :limit => 64, :default => "",    :null => false
    t.column "text",              :text,                   :default => "",    :null => false
    t.column "processed",         :boolean,                :default => false, :null => false
    t.column "created_on",        :datetime
    t.column "updated_on",        :datetime
  end

  create_table "postings", :force => true do |t|
    t.column "quantity",       :decimal,  :precision => 15, :scale => 5
    t.column "sub_account_id", :integer,                                 :null => false
    t.column "journal_id",     :integer,                                 :null => false
    t.column "currency_id",    :integer,                                 :null => false
    t.column "pair_id",        :integer,                                 :null => false
    t.column "created_on",     :datetime
    t.column "updated_on",     :datetime
  end

  add_index "postings", ["sub_account_id"], :name => "postings_sub_account_id_fkey_index"
  add_index "postings", ["journal_id"], :name => "postings_journal_id_fkey_index"
  add_index "postings", ["currency_id"], :name => "postings_currency_id_fkey_index"

  create_table "sub_account_types", :force => true do |t|
    t.column "description",             :string
    t.column "accounting_account_type", :string,   :limit => 1
    t.column "created_on",              :datetime
    t.column "updated_on",              :datetime
  end

  create_table "sub_accounts", :force => true do |t|
    t.column "description",         :string
    t.column "account_id",          :integer,  :null => false
    t.column "sub_account_type_id", :integer,  :null => false
    t.column "created_on",          :datetime
    t.column "updated_on",          :datetime
  end

  add_index "sub_accounts", ["account_id"], :name => "sub_accounts_account_id_fkey_index"
  add_index "sub_accounts", ["sub_account_type_id"], :name => "sub_accounts_sub_account_type_id_fkey_index"

  create_table "trades", :force => true do |t|
    t.column "quantity",         :decimal,               :precision => 15, :scale => 5
    t.column "position_qty",     :decimal,               :precision => 15, :scale => 5
    t.column "price_per_share",  :decimal,               :precision => 15, :scale => 5
    t.column "side",             :integer
    t.column "trade_type",       :string,   :limit => 1
    t.column "journal_id",       :integer
    t.column "account_id",       :integer,                                              :null => false
    t.column "comment",          :string
    t.column "tradeable_id",     :integer
    t.column "tradeable_type",   :string
    t.column "imported_fix_msg", :text
    t.column "created_on",       :datetime
    t.column "updated_on",       :datetime
  end

  add_index "trades", ["journal_id"], :name => "trades_journal_id_fkey_index"
  add_index "trades", ["account_id"], :name => "trades_account_id_fkey_index"

end
