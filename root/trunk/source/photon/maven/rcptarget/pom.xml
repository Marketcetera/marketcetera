<?xml version="1.0" encoding="UTF-8" ?>

<!--
  - Author: will@marketcetera.com
  - Since: 0.8.0
  - Version: $Id$
  - $License$
  -->

<project
 xmlns="http://maven.apache.org/POM/4.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation=
 "http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.marketcetera</groupId>
    <artifactId>photon-maven</artifactId>
    <version>1.5.0</version>
  </parent>
  <artifactId>photon-rcptarget</artifactId>
  <packaging>pom</packaging>

  <name>Photon RCP Target</name>

  <dependencies>
    <dependency>
      <groupId>${mvn.public.package}</groupId>
      <artifactId>photon-bundle</artifactId>
    </dependency>
    <dependency>
      <groupId>${mvn.public.package}</groupId>
      <artifactId>photon-test-bundle</artifactId>
    </dependency>
    <dependency>
      <groupId>com.google</groupId>
      <artifactId>guice</artifactId>
    </dependency>
    <dependency>
      <groupId>com.google</groupId>
      <artifactId>guice-source</artifactId>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <id>unpack</id>
            <phase>install</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>rcp-sdk</artifactId>
                  <version>${mvn.eclipse.version}</version>
                  <classifier>win32</classifier>
                  <type>zip</type>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>delta-pack</artifactId>
                  <version>${mvn.eclipse.version}</version>
                  <type>zip</type>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>sdk</artifactId>
                  <version>${mvn.eclipse.version}</version>
                  <classifier>win32</classifier>
                  <type>zip</type>
                  <includes>
                    eclipse/plugins/org.eclipse.ui.forms_*,
                    eclipse/plugins/org.eclipse.ui.forms.source_*,
                    eclipse/plugins/org.eclipse.ui.console_*,
                    eclipse/plugins/org.eclipse.ui.console.source_*,
                    eclipse/plugins/org.eclipse.core.resources_*,
                    eclipse/plugins/org.eclipse.core.resources.source_*,
                    eclipse/plugins/org.eclipse.update.ui_*,
                    eclipse/plugins/org.eclipse.update.ui.source_*,
                    eclipse/plugins/org.eclipse.ui.ide_*,
                    eclipse/plugins/org.eclipse.ui.ide.source_*,
                    eclipse/plugins/org.eclipse.ui.net_*,
                    eclipse/plugins/org.eclipse.ui.net.source_*,
                    eclipse/plugins/org.eclipse.debug.ui_*,
                    eclipse/plugins/org.eclipse.debug.ui.source_*,
                    eclipse/plugins/org.eclipse.search_*,
                    eclipse/plugins/org.eclipse.search.source_*,
                    eclipse/plugins/org.eclipse.team.core_*,
                    eclipse/plugins/org.eclipse.team.core.source_*,
                    eclipse/plugins/org.eclipse.core.filebuffers_*,
                    eclipse/plugins/org.eclipse.core.filebuffers.source_*,
                    eclipse/plugins/org.eclipse.core.filesystem_*,
                    eclipse/plugins/org.eclipse.core.filesystem.source_*,
                    eclipse/plugins/org.eclipse.core.net_*,
                    eclipse/plugins/org.eclipse.core.net.source_*,
                    eclipse/plugins/org.eclipse.core.variables_*,
                    eclipse/plugins/org.eclipse.core.variables.source_*,
                    eclipse/plugins/org.eclipse.debug.core_*,
                    eclipse/plugins/org.eclipse.debug.core.source_*,
                    eclipse/plugins/org.eclipse.jface.text_*,
                    eclipse/plugins/org.eclipse.jface.text.source_*,
                    eclipse/plugins/org.eclipse.text_*,
                    eclipse/plugins/org.eclipse.text.source_*,
                    eclipse/plugins/org.eclipse.ui.views_*,
                    eclipse/plugins/org.eclipse.ui.views.source_*,
                    eclipse/plugins/org.eclipse.ui.editors_*,
                    eclipse/plugins/org.eclipse.ui.editors.source_*,
                    eclipse/plugins/org.eclipse.ui.workbench.texteditor_*,
                    eclipse/plugins/org.eclipse.ui.workbench.texteditor.source_*,
                    eclipse/plugins/org.eclipse.update.core_*,
                    eclipse/plugins/org.eclipse.update.core.source_*,
                    eclipse/plugins/org.eclipse.equinox.security_*,
                    eclipse/plugins/org.eclipse.equinox.security.source_*,
                    eclipse/plugins/org.eclipse.ltk.core.refactoring_*,
                    eclipse/plugins/org.eclipse.ltk.core.refactoring.source_*,
                    eclipse/plugins/org.eclipse.ltk.ui.refactoring_*,
                    eclipse/plugins/org.eclipse.ltk.ui.refactoring.source_*,
                    eclipse/plugins/org.eclipse.ui.navigator_*,
                    eclipse/plugins/org.eclipse.ui.navigator.source_*,
                    eclipse/plugins/org.eclipse.compare_*,
                    eclipse/plugins/org.eclipse.compare.source_*,
                    eclipse/plugins/org.eclipse.team.ui_*,
                    eclipse/plugins/org.eclipse.team.ui.source_*,
                    eclipse/plugins/org.eclipse.ui.navigator.resources_*,
                    eclipse/plugins/org.eclipse.ui.navigator.resources.source_*,
                    eclipse/plugins/org.eclipse.ui.views.properties.tabbed_*,
                    eclipse/plugins/org.eclipse.ui.views.properties.tabbed.source_*
                  </includes>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>mylyn</artifactId>
                  <version>3.0.1.v20080721-2100-e3.4</version>
                  <type>zip</type>
                  <includes>
                    plugins/org.apache.commons.codec_*,
                    plugins/org.apache.commons.httpclient_*,
                    plugins/org.apache.commons.lang_*,
                    plugins/org.apache.commons.logging_*,
                    plugins/org.eclipse.mylyn.commons.net_*,
                    plugins/org.eclipse.mylyn.commons.ui_*,
                    plugins/org.eclipse.mylyn.commons.net.source_*,
                    plugins/org.eclipse.mylyn.commons.ui.source_*
                  </includes>
                  <outputDirectory>${mvn.photon.target}/eclipse</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>emf</artifactId>
                  <version>2.4.2</version>
                  <type>zip</type>
                  <includes>
                    eclipse/plugins/org.eclipse.emf.common_*,
                    eclipse/plugins/org.eclipse.emf.ecore_*,
                    eclipse/plugins/org.eclipse.emf.databinding_*
                  </includes>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>emf-source</artifactId>
                  <version>2.4.2</version>
                  <type>zip</type>
                  <includes>
                    eclipse/plugins/org.eclipse.emf.source_*/**
                  </includes>
                </artifactItem>
                <artifactItem>
                  <groupId>org.eclipse</groupId>
                  <artifactId>junit45-feature-patch-3.4.1</artifactId>
                  <version>20090204</version>
                  <type>zip</type>
                  <outputDirectory>${mvn.photon.target}/eclipse</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.rubypeople</groupId>
                  <artifactId>rdt</artifactId>
                  <version>20081114</version>
                  <type>zip</type>
                  <includes>
                    plugins/org.kxml2_*,
                    plugins/org.jruby_*,
                    plugins/org.rubypeople.rdt.core_*,
                    plugins/org.rubypeople.rdt.debug.core_*,
                    plugins/org.rubypeople.rdt.launching_*,
                    plugins/org.rubypeople.rdt.ui_*,
                    plugins/org.epic.regexp_*,
                    plugins/com.aptana.rdt_*
                  </includes>
                  <outputDirectory>${mvn.photon.target}/eclipse</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>com.swtworkbench.community</groupId>
                  <artifactId>xswt</artifactId>
                  <version>1.1.2</version>
                  <type>zip</type>
                  <includes>
                    plugins/org.kxml_*/**
                  </includes>
                  <outputDirectory>${mvn.photon.target}/eclipse</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.marketcetera</groupId>
                  <artifactId>photon-bundle</artifactId>
                  <version>${project.version}</version>
                  <type>jar</type>
                  <outputDirectory>${mvn.photon.target}/eclipse/plugins/org.marketcetera.thirdparty_${project.version}</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.marketcetera</groupId>
                  <artifactId>photon-test-bundle</artifactId>
                  <version>${project.version}</version>
                  <type>jar</type>
                  <outputDirectory>${mvn.photon.target}/eclipse/plugins/org.marketcetera.thirdparty.test_${project.version}</outputDirectory>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${mvn.photon.target}</outputDirectory>
            </configuration>
          </execution>
          <execution>
            <id>copy-dependencies</id>
            <phase>package</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <outputDirectory>${mvn.photon.target}/eclipse/plugins</outputDirectory>
              <!-- Don't copy in marketcetera dependencies, they have their own projects. -->
              <excludeGroupIds>org.marketcetera</excludeGroupIds>
              <!-- Don't copy transitive dependencies, they may not be plugins and will be handled by photon-bundle. -->
              <excludeTransitive>true</excludeTransitive>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <configuration>
          <filesets>
            <fileset>
              <directory>${mvn.photon.target}</directory>
            </fileset>
          </filesets>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
