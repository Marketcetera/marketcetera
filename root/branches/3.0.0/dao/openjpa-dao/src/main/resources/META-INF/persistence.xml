<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~ THIS PROGRAM IS CONFIDENTIAL AND PROPRIETARY TO MAUSWERKS LLC AND MAY NOT BE REPRODUCED,
  ~ PUBLISHED OR DISCLOSED TO OTHERS WITHOUT WRITTEN AUTHORIZATION.
  ~
  ~ Copyright (c) 2010-2011, MAUSWERKS, LLC.  THIS WORK IS UNPUBLISHED
  -->

<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">

    <persistence-unit name="marketcetera" transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <jta-data-source>osgi:service/javax.sql.DataSource</jta-data-source>

        <class>org.marketcetera.dao.impl.PersistentAuthority</class>
        <class>org.marketcetera.dao.impl.PersistentGroup</class>
        <class>org.marketcetera.dao.impl.PersistentSystemObject</class>
        <class>org.marketcetera.dao.impl.PersistentUser</class>
        <class>org.marketcetera.dao.impl.PersistentVersionedObject</class>

        <exclude-unlisted-classes>true</exclude-unlisted-classes>

        <properties>
            <!--<property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(SchemaAction='add,deleteTableContents')"/>-->
            <!--<property name="openjpa.ConnectionURL" value="jdbc:derby://localhost:1527/StoreSystem"/>-->
            <!--<property name="openjpa.ConnectionDriverName" value="org.apache.derby.jdbc.ClientDriver"/>-->
            <property name="openjpa.Log" value="slf4j" />
            <!--<property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO, SQL=TRACE, Schema=Trace"/>-->
            <!--<property name="openjpa.ConnectionDriverName" value="org.postgresql.Driver" />-->
            <!--<property name="openjpa.ConnectionURL" value="jdbc:postgresql:haulhive" />-->
            <!--<property name="openjpa.ConnectionUserName" value="mw" />-->
            <!--<property name="openjpa.ConnectionPassword" value="1pw4mw" />-->
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)" />
            <property name="openjpa.ConnectionFactoryProperties" value="PrettyPrint=true, PrettyPrintLineLength=72" />
            <property name="openjpa.Multithreaded" value="true"/>
            <property name="openjpa.TransactionMode" value="managed"/>
            <property name="openjpa.ConnectionFactoryMode" value="managed"/>
            <property name="openjpa.LockManager" value="pessimistic(VersionCheckOnReadLock=true,VersionUpdateOnWriteLock=true)"/>
            <property name="openjpa.LockTimeout" value="30000"/>
            <property name="openjpa.jdbc.MappingDefaults" value="ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict"/>
        </properties>
    </persistence-unit>
</persistence>
