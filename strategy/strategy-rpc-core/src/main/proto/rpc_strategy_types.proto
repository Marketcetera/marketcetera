//
// this file is automatically generated
// @Preserve
//
syntax = "proto3";
option java_generic_services = true;
option java_package = "org.marketcetera.strategy";
option java_outer_classname = "StrategyTypesRpc";
import "rpc_base.proto";
import "rpc_admin.proto";
import "google/protobuf/timestamp.proto";

enum StrategyStatus {
    STOPPED = 0;
    RUNNING = 1;
    ERROR = 2;
    LOADING = 3;
}

enum StrategyMessageSeverity {
    SEVERITY_DEBUG = 0;
    SEVERITY_INFO = 1;
    SEVERITY_WARN = 2;
    SEVERITY_ERROR = 3;
}

// contains a message from the strategy
message StrategyMessage {
    int64 strategyMessageId = 1; // uniquely identifies this strategy
    StrategyInstance strategyInstance = 2; // strategy that produced the message
    StrategyMessageSeverity severity = 3; // describes the severity of the message
    string message = 4; // strategy message
    google.protobuf.Timestamp messageTimestamp = 5; // date strategy was started
}

// describes a loaded strategy
message StrategyInstance {
    User user = 1; // user that owns the strategy
    string name = 2; // uniquely describes the strategy
    string filename = 3; // indicates the server-local file which contains the strategy
    string hash = 4; // indicates the strategy hash value
    string nonce = 5; // uniquely identifies a strategy upload request
    google.protobuf.Timestamp started = 6; // date strategy was started
    StrategyStatus status = 7; // describes the status of the strategy
}
message FileUploadMetaData {
  string name = 1;
  string filename = 2;
  string nonce = 3;
  string hash = 4;
  User owner = 5;
  google.protobuf.Timestamp requestTimestamp = 6; 
}

message UploadFile {
  bytes content = 1;
}

enum FileUploadStatus {
  PENDING = 0;
  IN_PROGRESS = 1;
  SUCCESS = 2;
  FAILED = 3;
}

message StrategyEvent {
    StrategyInstance strategyInstance = 1;
    string message = 2;
    string eventType = 3;
    StrategyStatus oldStatusValue = 4;
    StrategyStatus newStatusValue = 5;
    StrategyMessageSeverity severity = 6;
    google.protobuf.Timestamp messageTimestamp = 7;
    int64 id = 8;
}
