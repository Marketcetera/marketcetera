//
// this file is automatically generated
//
syntax = "proto3";
option java_generic_services = true;
option java_package = "org.marketcetera.eventbus.data.event";
option java_outer_classname = "DataEventRpc";
import "rpc_base.proto";
import "google/protobuf/timestamp.proto";

enum DataEventChangeType {
    ADD = 0;
    CHANGE = 1;
    DELETE = 2;
}

// indicates that a data object has been added, changed, or deleted
message DataEvent {
    int64 id = 1; // id of the data object
    google.protobuf.Timestamp timestamp = 2; // time when the data changed
    string type = 3; // type of the event
}

// request data events
message DataEventRequest {
    string sessionId = 1;
    string requestId = 2;
    repeated string types = 3;
}

// return data events
message DataEventResponse {
    string requestId = 1;
    repeated DataEvent dataEvents = 2;
}

// cancels data event request
message DataEventRequestCancel {
    string sessionId = 1;
    string requestId = 2;
}

// cancels data event request
message DataEventCancelResponse {
    string requestId = 1;
}

// services for data events
service DataEventRpcService {
    rpc login(LoginRequest) returns (LoginResponse); // starts the session
    rpc logout(LogoutRequest) returns (LogoutResponse); // ends the session
    rpc heartbeat(HeartbeatRequest) returns (HeartbeatResponse); // keeps the session alive
    rpc subscribeToDataEvents(DataEventRequest) returns (stream DataEventResponse); // requests data events
    rpc unSubscribeToDataEvents(DataEventRequestCancel) returns (DataEventCancelResponse); // cancels data event request
}
